
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/profile.css">
</head>
<body>
    <div class="profile-container">
        <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ -->
        <div class="profile-sidebar">
            <div class="logo-sidebar">
                <img src="/images/logo.png" alt="–õ–æ–≥–æ—Ç–∏–ø">
            </div>
            <ul class="profile-nav">
                <li><a href="/" class="active"><i>üè†</i> –ì–ª–∞–≤–Ω–∞—è</a></li>
                <li><a href="/contacts"><i>üìû</i> –ö–æ–Ω—Ç–∞–∫—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞</a></li>
                <li><a href="/myteams"><i>üë•</i> –ú–æ–∏ –∫–æ–º–∞–Ω–¥—ã</a></li>
                <li><a href="/teams"><i>‚öΩ</i> –ë–ª–∏–∂–∞–π—à–∏–µ –∏–≥—Ä—ã</a></li>
                <li><a href="/my-courts"><i>üìç</i> –ú–æ–∏ –ø–ª–æ—â–∞–¥–∫–∏</a></li>
                <li><a href="/my-reviews"><i>‚úçÔ∏è</i> –ú–æ–∏ –æ—Ç–∑—ã–≤—ã</a></li>
                <li><a href="/logoutPage"><i>üö™</i> –í—ã–π—Ç–∏</a></li>
            </ul>
        </div>

        <!-- –û—Å–Ω–æ–≤–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–æ—Ñ–∏–ª—è -->
        <div class="profile-content">
            <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–æ—Ñ–∏–ª—è —Å –∞–≤–∞—Ç–∞—Ä–∫–æ–π -->
            <div class="profile-header">
                <div class="profile-avatar">
                    <img src="${player.avatarUrl!'/images/default-avatar.png'}" alt="–ê–≤–∞—Ç–∞—Ä ${player.name}" class="avatar-img">
                    <form action="/upload-avatar" method="post" enctype="multipart/form-data">
                        <label class="avatar-upload">
                            <input type="file" name="avatar" accept="image/*">
                            <i>‚úèÔ∏è</i>
                        </label>
                    </form>
                </div>
                <div class="profile-info">
                    <h2>${player.name}</h2>
                    <p>–£—á–∞—Å—Ç–Ω–∏–∫ —Å ${player.registrationDate?string('dd MMMM yyyy')} ¬∑ ${player.age} –≥–æ–¥–∞</p>

                </div>
            </div>

            <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div class="profile-section">
                <h3 class="section-title">–õ–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è <button class="edit-btn" id="editPersonalBtn"><i>‚úèÔ∏è</i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button></h3>

                <div class="info-grid">
                    <div class="info-card">
                        <div class="info-label">–ü–æ–ª–Ω–æ–µ –∏–º—è</div>
                        <div class="info-value">${player.name!''}</div>
                    </div>

                    <div class="info-card">
                        <div class="info-label">–ü–æ–ª</div>
                        <div class="info-value">
                            <#if player.gender??>
                                    <#if player.gender == "MALE">–ú—É–∂—Å–∫–æ–π
                                    <#elseif player.gender == "FEMALE">–ñ–µ–Ω—Å–∫–∏–π
                                    <#else>–ù–µ —É–∫–∞–∑–∞–Ω
                                    </#if>
                                <#else>
                                    –ù–µ —É–∫–∞–∑–∞–Ω
                                </#if>
                        </div>
                    </div>
                    <div class="info-card">
                        <div class="info-label">C—Ç–∞—Ç—É—Å</div>
                        <div class="info-value">${player.experience!'–ù–µ —É–∫–∞–∑–∞–Ω'}</div>
                    </div>
                      <div class="info-grid">
                                        <div class="info-card">
                                            <div class="info-label">–ü–æ–ª–Ω—ã—Ö –ª–µ—Ç</div>
                                            <div class="info-value">${player.age!''}</div>
                                        </div>
                </div>

                <!-- –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ª–∏—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ -->
                <form id="personalForm" class="hidden" action="/updatePersonalInfo" method="post">
                    <input type="hidden" name="_method" value="put"/>
                    <input type="hidden" name="_csrf" value="${_csrf.token}"/>

                    <div class="form-row">
                        <label for="fullname">–ü–æ–ª–Ω–æ–µ –∏–º—è</label>
                        <input type="text" id="fullname" name="name" value="${player.name!''}">
                    </div>
                    <div class="form-row">
                        <label for="birthdate">–í–æ–∑—Ä–∞—Å—Ç</label>
                        <input type="number" id="birthdate" name="age" value="${player.age}">
                    </div>
                    <div class="form-row">
                        <label for="gender">–ü–æ–ª</label>
                        <select id="gender" name="gender">
                        <option value="MALE" <#if player.gender?? && player.gender == "MALE">selected</#if>>–ú—É–∂—Å–∫–æ–π</option>
                                <option value="FEMALE" <#if player.gender?? && player.gender == "FEMALE">selected</#if>>–ñ–µ–Ω—Å–∫–∏–π</option>
                        </select>
                    </div>
                    <div class="form-row">
                        <label for="level">–°—Ç–∞—Ç—É—Å</label>
                        <select id="level" name="status">
                         <option value="">-- –í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç—É—Å --</option>
                                <option value="–ò–≥—Ä–æ–∫">–ò–≥—Ä–æ–∫</option>
                                <option value="–ö–∞–ø–∏—Ç–∞–Ω">–ö–∞–ø–∏—Ç–∞–Ω</option>
                                <option value="–ó—Ä–∏—Ç–µ–ª—å">–ó—Ä–∏—Ç–µ–ª—å</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn cancel-btn" id="cancelPersonalBtn"><i>‚úñ</i> –û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" class="btn"><i>‚úì</i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                    </div>
                </form>
            </div>

            <!-- –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
            <div class="profile-section">
                <h3 class="section-title">–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è <button class="edit-btn" id="editContactBtn"><i>‚úèÔ∏è</i> –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button></h3>

                <div class="info-grid">
                    <div class="info-card">
                        <div class="info-label">–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</div>
                        <div class="info-value">${player.contact!'–ù–µ —É–∫–∞–∑–∞–Ω'}</div>
                    </div>

                    <div class="info-card">
                        <div class="info-label">–†–∞–π–æ–Ω</div>
                        <div class="info-value">${player.district!'–ù–µ —É–∫–∞–∑–∞–Ω'}</div>
                    </div>

                </div>

                <!-- –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ -->
                <form class="edit-form" id="contactForm" action="/update-contacts" method="post">
                 <input type="hidden" name="_method" value="put"/>
                                    <input type="hidden" name="_csrf" value="${_csrf.token}"/>
                    <div class="form-row">
                        <label for="contact">–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</label>
                        <textarea id="contact" name="contact" rows="3" class="editable-textarea">–í–∞—à–∞ –∫–æ–Ω—Ç–∞–∫—Ç–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∑–¥–µ—Å—å</textarea>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn cancel-btn" id="cancelContactBtn"><i>‚úñ</i> –û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" class="btn"><i>‚úì</i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è</button>
                    </div>
                </form>
            </div>

            <!-- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å -->
            <div class="profile-section">
                <h3 class="section-title">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å <button class="edit-btn" id="editSecurityBtn"><i>‚úèÔ∏è</i> –ò–∑–º–µ–Ω–∏—Ç—å</button></h3>

                <div class="info-grid">
                    <div class="info-card">
                        <div class="info-label">–ü–∞—Ä–æ–ª—å</div>
                        <div class="info-value password-field">
                            ********
                            <span class="password-toggle" id="togglePassword">–ü–æ–∫–∞–∑–∞—Ç—å</span>
                        </div>
                    </div>

                </div>

                <!-- –§–æ—Ä–º–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–æ–ª—è -->
                <form class="edit-form" id="securityForm" action="/change-password" method="post">
                    <div class="form-row">
                        <label for="currentPassword">–¢–µ–∫—É—â–∏–π –ø–∞—Ä–æ–ª—å</label>
                        <input type="password" id="currentPassword" name="currentPassword" required>
                    </div>
                    <div class="form-row">
                        <label for="newPassword">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                        <input type="password" id="newPassword" name="newPassword" required>
                    </div>
                    <div class="form-row">
                        <label for="confirmPassword">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –Ω–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
                        <input type="password" id="confirmPassword" name="confirmPassword" required>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn cancel-btn" id="cancelSecurityBtn"><i>‚úñ</i> –û—Ç–º–µ–Ω–∞</button>
                        <button type="submit" class="btn"><i>‚úì</i> –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="/profile.js"></script>
</body>
</html>